<!doctype html>
<html class="no-js" lang"">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>2 by 2 games</title>
            
        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/svg-styles.css">
        <link rel="stylesheet" href="css/widgets-styles.css">
        <link rel="stylesheet" href="css/font.css">
        <link rel="stylesheet" href="css/2by2.css">
    </head>
</script>

<body onload="initDraws()">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


<script>
    var svg;
    var ctx1,ctx2;
    var points=[];
    var svgH=400;
    var svgW=300;
    var moving_point;
    var payoff=[];
    var precision;
    var path=window.location.pathname;
    

    
    function initDraws() {

        document.getElementById("SvgjsSvg1000").addEventListener("click", function(){
        document.addEventListener("keyup", function(){
                                  redraw();
            });
         });
        precision=1/document.getElementById("precision").value;
        svg = document.getElementById("drawing");
        svgPosition = svg.getBoundingClientRect();
        payoff=document.getElementsByClassName("pay");
        lines=document.getElementsByClassName("line_trans");
        for(i=0;i<8;i++){
            payoff[i].addEventListener("mousedown", doMouseDown);
        }
        for(i=0;i<4;i++){
            lines[i].addEventListener("mousedown", doMouseDown);
        }
        /*var s22= svg.getElementsByClassName("strat22");
        var s21= svg.getElementsByClassName("strat21");
        var s12= svg.getElementsByClassName("strat12");
        var s11= svg.getElementsByClassName("strat11");
        for (i=0;i<s22.length;i++)
            s22[i].addEventListener("keyup",edit_text);
        for (i=0;i<s21.length;i++)
            s21[i].addEventListener("keyup",edit_text);
        for (i=0;i<s11.length;i++)
            s11[i].addEventListener("keyup",edit_text);
        for (i=0;i<s12.length;i++)
            s12[i].addEventListener("keyup",edit_text);*/
        compute_firstP();
        compute_secondP();
        draw();
    }


/*function keyup(event) {
    temp=event.currentTarget;
    console.log("Down: "+this.getAttribute("class"));
    moving_point=this;
    if (this.getAttribute("class").includes("line_trans")){
        Pos_prev=getMousePosition(event);
        document.addEventListener("mousemove", doMouseMoveLine);
    }
    else
    document.addEventListener("mousemove", doMouseMove);
    document.addEventListener("mouseup", doMouseUp);
    this.removeEventListener("mousedown", doMouseDown);
}*/

function redraw(){

    precision=1/document.getElementById("precision").value;
    GTE.tree.clear();
    document.getElementById('matrix-player-1').value = GTE.tree.matrix.getMatrixInStringFormat(0);
    document.getElementById('matrix-player-2').value = GTE.tree.matrix.getMatrixInStringFormat(1);
    GTE.tree.matrix.drawMatrix();
    compute_firstP();
    compute_secondP();
    draw();
}

function getMousePosition(e) {
    return {
        x: e.clientX ,
        y: e.clientY
  };
}


function doMouseDown(event) {
    event.preventDefault();
    console.log("Down: "+this.getAttribute("class"));
    moving_point=this;
    if (this.getAttribute("class").includes("line_trans")){
        Pos_prev=getMousePosition(event);
        document.addEventListener("mousemove", doMouseMoveLine);
    }
    else{
        document.addEventListener("mousemove", doMouseMove);
    }
    document.addEventListener("mouseup", doMouseUp);
    this.removeEventListener("mousedown", doMouseDown);
}


function doMouseUp(event) {
    mousePosition = getMousePosition(event)
    if (moving_point.getAttribute("class").includes("line_trans")){
        document.removeEventListener("mousemove", doMouseMoveLine);
    }
    else{
        document.removeEventListener("mousemove", doMouseMove);
    }
    document.removeEventListener("mouseup", doMouseUp);
    moving_point.addEventListener("mousedown", doMouseDown);
    moving_point=null;
    //console.log("Releasing: X = " + mousePosition.x + ", Y = " + mousePosition.y);
}


function doMouseMove(event) {
    var mousePosition = getMousePosition(event)
    //console.log("Down: "+moving_point.getAttribute("class"));
    svgPosition = svg.getBoundingClientRect();
    //var newPos=~~((-mousePosition.y+svgPosition.top+svgH-50)/3)/10;
    var newPos=Math.round((2*svgH/(svgPosition.bottom-svgPosition.top)*(-mousePosition.y+svgPosition.top)+svgH-50)/30*precision)/precision;
    if (Number(newPos)<0) newPos=0;
    if (Number(newPos)>10) newPos=10;
    if( (Number(newPos)-moving_point.getAttribute("cy"))*(Number(newPos)-moving_point.getAttribute("cy"))>0.005){
        var player=moving_point.getAttribute("asso_player");
        var strat=moving_point.getAttribute("asso_strat");
       //document.getElementById(moving_point.getAttribute("asso")).value=newPos;
       GTE.tree.matrix.matrix[strat].strategy.payoffs[player].value=newPos;
       GTE.tree.matrix.matrix[strat].strategy.payoffs[player].text=newPos;
       redraw();
    }
    
    //console.log("Moving: X = " + mousePosition.x + ", Y = " + mousePosition.y);
}

function doMouseMoveLine(event) {
    var mousePosition = getMousePosition(event)
    diff=mousePosition.y-Pos_prev.y;
        var player1=moving_point.getAttribute("asso_player1");
        var strat1=moving_point.getAttribute("asso_strat1");
        var player2=moving_point.getAttribute("asso_player2");
        var strat2=moving_point.getAttribute("asso_strat2");
        //var point1=document.getElementById(moving_point.getAttribute("asso1"));
        var point1=GTE.tree.matrix.matrix[strat1].strategy.payoffs[player1];
        var point2=GTE.tree.matrix.matrix[strat2].strategy.payoffs[player2];
        var diffPos=~~((2*svgH/(svgPosition.bottom-svgPosition.top)*(diff))/30*precision)/precision;
        //var point2=document.getElementById(moving_point.getAttribute("asso2"));
        var pos1=Math.round((point1.value-diffPos)*precision)/precision;
        var pos2=Math.round((point2.value-diffPos)*precision)/precision;
        if (pos2>=0 && pos2<=10 && pos1>=0 && pos1<=10 && diffPos!=0  ){
            point1.value=pos1;
            point2.value=pos2;
            point1.text=pos1;
            point2.text=pos2;

            Pos_prev=mousePosition;
            point1.draw();
            point2.draw();
            redraw();
    }

    
    //console.log("Moving: X = " + mousePosition.x + ", Y = " + mousePosition.y);
}



function compute_firstP(){
        var P1_11=Math.round(GTE.tree.matrix.matrix[0].strategy.payoffs[0].value*precision)/precision;
        GTE.tree.matrix.matrix[0].strategy.payoffs[0].value=P1_11;
        var P1_12=Math.round(GTE.tree.matrix.matrix[1].strategy.payoffs[0].value*precision)/precision;
        GTE.tree.matrix.matrix[1].strategy.payoffs[0].value=P1_12;
        var P1_21=Math.round(GTE.tree.matrix.matrix[2].strategy.payoffs[0].value*precision)/precision;
        GTE.tree.matrix.matrix[2].strategy.payoffs[0].value=P1_21;
        var P1_22=Math.round(GTE.tree.matrix.matrix[3].strategy.payoffs[0].value*precision)/precision;
        GTE.tree.matrix.matrix[3].strategy.payoffs[0].value=P1_22;
        payoff[0].setAttributeNS(null, "cy", svgH-50-P1_11*30);
        payoff[1].setAttributeNS(null, "cy", svgH-50-P1_12*30);
        payoff[2].setAttributeNS(null, "cy", svgH-50-P1_21*30);
        payoff[3].setAttributeNS(null, "cy", svgH-50-P1_22*30);
        var maxP1_1, minP1_1, maxP1_2, minP1_2; // max and min off player1 payoff for strategy 1 or 2 of player2
        if( Number(P1_11)>Number(P1_21)){
            maxP1_1=P1_11;
            minP1_1=P1_21;
            M1_1=1;
        }else{
            maxP1_1=P1_21;
            minP1_1=P1_11;
            M1_1=2;
            if (Number(P1_11)==Number(P1_21))
            M1_1=0;
        }
        if( Number(P1_12)>Number(P1_22)){
            maxP1_2=P1_12;
            minP1_2=P1_22;
            M1_2=1;
        }else{
            maxP1_2=P1_22;
            minP1_2=P1_12;
            M1_2=2;
            if (Number(P1_12)==Number(P1_22))
            M1_2=0;
        }
        if(maxP1_1==P1_11 && maxP1_2==P1_12){ //If 1 is the best strategy, the middle point is on the left
            point1_1={x:50,y:svgH-50-maxP1_1*30};
            point1_2={x:50,y:svgH-50-maxP1_1*30};
            point1_3={x:svgW-50,y:svgH-50-maxP1_2*30};}
        else if(maxP1_1==P1_21 && maxP1_2==P1_22){//If 2 is the best strategy, the middle point is on the right
            point1_1={x:50,y:svgH-50-maxP1_1*30};
            point1_2={x:svgW-50,y:svgH-50-maxP1_2*30};
            point1_3={x:svgW-50,y:svgH-50-maxP1_2*30};
            }
        else{
            var middle_x=(P1_21-P1_11)/(Number(P1_21)- Number(P1_22) + Number(P1_12) - Number(P1_11));
            var middle_y=Number((P1_12-P1_11)*middle_x)+Number(P1_11);
            point1_1={x:50, y:svgH-50-maxP1_1*30};
            point1_2={x:middle_x * (svgW-100)+50,y:svgH-50-middle_y*30};
            point1_3={x:svgW-50,y:svgH-50-maxP1_2*30};
               
        }
    }
            
    function compute_secondP(){
        var P2_11=Math.round(GTE.tree.matrix.matrix[0].strategy.payoffs[1].value*precision)/precision;
        GTE.tree.matrix.matrix[0].strategy.payoffs[1].value=P2_11;
        var P2_12=Math.round(GTE.tree.matrix.matrix[1].strategy.payoffs[1].value*precision)/precision;
        GTE.tree.matrix.matrix[1].strategy.payoffs[1].value=P2_12;
        var P2_21=Math.round(GTE.tree.matrix.matrix[2].strategy.payoffs[1].value*precision)/precision;
        GTE.tree.matrix.matrix[2].strategy.payoffs[1].value=P2_21;
        var P2_22=Math.round(GTE.tree.matrix.matrix[3].strategy.payoffs[1].value*precision)/precision;
        GTE.tree.matrix.matrix[3].strategy.payoffs[1].value=P2_22;
        
        payoff[4].setAttributeNS(null, "cy", svgH-50-P2_11*30);
        payoff[5].setAttributeNS(null, "cy", svgH-50-P2_12*30);
        payoff[6].setAttributeNS(null, "cy", svgH-50-P2_21*30);
        payoff[7].setAttributeNS(null, "cy", svgH-50-P2_22*30);
        var maxP2_1, minP2_1, maxP2_2, minP2_2; // max and min off player1 payoff for strategy 1 or 2 of player2
        if( Number(P2_11)>Number(P2_12)){
            maxP2_1=P2_11;
            minP2_1=P2_12;
            M2_1=1;
        }else{
            maxP2_1=P2_12;
            minP2_1=P2_11;
            M2_1=2;
            if (Number(P2_11)==Number(P2_12))
            M2_1=0;
        }
        if( Number(P2_21)>Number(P2_22)){
            maxP2_2=P2_21;
            minP2_2=P2_22;
            M2_2=1;
        }else{
            maxP2_2=P2_22;
            minP2_2=P2_21;
            M2_2=2;
            if (Number(P2_21)==Number(P2_22))
            M2_2=0;
        }
        if(maxP2_1==P2_11 && maxP2_2==P2_21){//If 1 is the best strategy, the middle point is on the left
            point2_1={x:450,y:svgH-50-maxP2_1*30};
            point2_2={x:450,y:svgH-50-maxP2_1*30};
            point2_3={x:svgW-50+400,y:svgH-50-maxP2_2*30};
            }
        else if (maxP2_1==P2_12 && maxP2_2==P2_22){//If 2 is the best strategy, the middle point is on the right
            point2_1={x:450,y:svgH-50-maxP2_1*30};
            point2_2={x:svgW-50+400,y:svgH-50-maxP2_2*30};
            point2_3={x:svgW-50+400,y:svgH-50-maxP2_2*30};
        }
        else{
            var middle_x=(P2_12-P2_11)/(Number(P2_12)- Number(P2_22) + Number(P2_21) - Number(P2_11));
            var middle_y=Number((P2_21-P2_11)*middle_x)+Number(P2_11);
            point2_1={x:450,y:svgH-50-maxP2_1*30};
            point2_2={x:middle_x * (svgW-100)+450,y:svgH-50-middle_y*30};
            point2_3={x:svgW-50+400,y:svgH-50-maxP2_2*30};
        }
    }
    
    function draw(){
        var P1S1=GTE.tree.matrix.strategies[1][0].moves[0].name;
        var P1S2=GTE.tree.matrix.strategies[1][1].moves[0].name;
        var P2S1=GTE.tree.matrix.strategies[2][0].moves[0].name;
        var P2S2=GTE.tree.matrix.strategies[2][1].moves[0].name;
        
        // Lines update svg1
        var lines=svg.getElementsByClassName("lined1");
        lines[0].setAttributeNS(null, "y1", payoff[0].getAttribute("cy"));
        lines[0].setAttributeNS(null, "y2", payoff[1].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y1", payoff[0].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y2", payoff[1].getAttribute("cy"));
        if (point1_2.x<250 || (M1_2==0 && M1_1==0)){//Label strategy iff they are part of a best reponse
            var labelline=svg.getElementById("text11");
            labelline.setAttributeNS(null, "y", Number(payoff[0].getAttribute("cy"))+Number((payoff[1].getAttribute("cy")-(payoff[0].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P1S1;
        }
        else {
            labelline=svg.getElementById("text11");
            labelline.textContent="";
        }
        lines[2].setAttributeNS(null, "y1", payoff[2].getAttribute("cy"));
        lines[2].setAttributeNS(null, "y2", payoff[3].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y1", payoff[2].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y2", payoff[3].getAttribute("cy"));
        if(point1_2.x>50 || (M1_2==0 && M1_1==0)){//Label strategy iff they are part of a best reponse
            labelline=svg.getElementById("text12");
            labelline.setAttributeNS(null, "y", Number(payoff[3].getAttribute("cy"))+Number((payoff[2].getAttribute("cy")-(payoff[3].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P1S2;
        }
        else {
            labelline=svg.getElementById("text12");
            labelline.textContent="";
        }
        // Lines update svg2
        lines=svg.getElementsByClassName("lined2");
        lines[0].setAttributeNS(null, "y1", payoff[4].getAttribute("cy"));
        lines[0].setAttributeNS(null, "y2", payoff[6].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y1", payoff[4].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y2", payoff[6].getAttribute("cy"));
        if(point2_2.x<650 || (M2_2==0 && M2_1==0)){//Label strategy iff they are part of a best reponse
            labelline=svg.getElementById("text21");
            labelline.setAttributeNS(null, "y", Number(payoff[4].getAttribute("cy"))+Number((payoff[6].getAttribute("cy")-(payoff[4].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P2S1;
        }
        else {
            labelline=svg.getElementById("text21");
            labelline.textContent="";
        }
        lines[2].setAttributeNS(null, "y1", payoff[5].getAttribute("cy"));
        lines[2].setAttributeNS(null, "y2", payoff[7].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y1", payoff[5].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y2", payoff[7].getAttribute("cy"));
        if (point2_2.x>450 || (M2_2==0 && M2_1==0)){//Label strategy iff they are part of a best reponse
            labelline=svg.getElementById("text22");
            labelline.setAttributeNS(null, "y", Number(payoff[7].getAttribute("cy"))+Number((payoff[5].getAttribute("cy")-(payoff[7].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P2S2;
        }
        else {
            labelline=svg.getElementById("text22");
            labelline.textContent="";
        }
        //envelop svg1
        var envelop1=document.getElementById("envelop1");
        envelop1.setAttributeNS(null,"points", "50,50 "+point1_1.x+","+point1_1.y+" "+point1_2.x+","+point1_2.y+" "+point1_3.x+","+point1_3.y+" 250,50");
        var inter=svg.getElementById("inter1");
        inter.setAttributeNS(null,"cx", point1_2.x);
        inter.setAttributeNS(null,"cy", point1_2.y);
        var interlabel=svg.getElementById("interlabel1");
        interlabel.setAttributeNS(null, "x",point1_2.x);
        interlabel.textContent=Math.round((Number(point1_2.x)-50)/2)/100;
        var stick=svg.getElementsByClassName("interstick1");
        for (i=0;i<stick.length;i++){
            stick[i].setAttributeNS(null, "x1",point1_2.x);
            stick[i].setAttributeNS(null, "x2",point1_2.x);}
        //envelop svg2
        var envelop2=document.getElementById("envelop2");
        envelop2.setAttributeNS(null,"points", "450,50 "+point2_1.x+","+point2_1.y+" "+point2_2.x+","+point2_2.y+" "+point2_3.x+","+point2_3.y+" 650,50");
        inter=svg.getElementById("inter2");
        inter.setAttributeNS(null,"cx", point2_2.x);
        inter.setAttributeNS(null,"cy", point2_2.y);
        interlabel=svg.getElementById("interlabel2");
        interlabel.setAttributeNS(null, "x",point2_2.x);
        interlabel.textContent=Math.round((Number(point2_2.x)-450)/2)/100;
        var stick=svg.getElementsByClassName("interstick2");
        for (i=0;i<stick.length;i++){
            stick[i].setAttributeNS(null, "x1",point2_2.x);
            stick[i].setAttributeNS(null, "x2",point2_2.x);
        }
        
        //change legend according to strategies name.
        /*var temp= svg.getElementById("y11");
        temp.textContent=P2S1;
        temp= svg.getElementById("y12");
        temp.textContent=P2S2;
        temp= svg.getElementById("y21");
        temp.textContent=P1S1;
        temp= svg.getElementById("y22");
        temp.textContent=P1S2;*/
        var temp= svg.getElementsByClassName("strat22");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P2S2;
        }
        temp= svg.getElementsByClassName("strat21");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P2S1;
        }
        temp= svg.getElementsByClassName("strat12");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P1S2;
        }
        temp= svg.getElementsByClassName("strat11");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P1S1;
        }
        
        
        //Best reponse path
        temp= svg.getElementsByClassName("br");
        temp2= svg.getElementsByClassName("brline");
        var path1="";
        var path2="";
        var path1_2="";
        var path2_2="";
        var path1_3="";
        var path2_3="";
        nb=0;
        temp[0].setAttributeNS(null, "r", 10);
        temp[1].setAttributeNS(null, "r", 10);
        temp[2].setAttributeNS(null, "r", 10);
        temp[3].setAttributeNS(null, "r", 10);
        temp[4].setAttributeNS(null, "height", 0);
        temp[5].setAttributeNS(null, "height", 0);
        temp[6].setAttributeNS(null, "height", 0);
        temp[7].setAttributeNS(null, "height", 0);
        temp[8].setAttributeNS(null, "height", 0);
        temp[4].setAttributeNS(null, "width", 0);
        temp[5].setAttributeNS(null, "width", 0);
        temp[6].setAttributeNS(null, "width", 0);
        temp[7].setAttributeNS(null, "width", 0);
        temp[8].setAttributeNS(null, "width", 0);
        //setting player 1 path
        // We remove pure equilibria that don't correspond to player 1.
        if (M1_1==M1_2){
            if (M1_2==0){
               path1="50,500, 250,500, 250,700, 50,700, 50,500";
               temp[8].setAttributeNS(null, "x", 45);
               temp[8].setAttributeNS(null, "y", 495);
               temp[8].setAttributeNS(null, "height", 210);
               temp[8].setAttributeNS(null, "width", 210);
            }
            else{
                if (M1_2==1){
                    path1="50,500, 250,500";
                    temp[2].setAttributeNS(null, "r", 0);
                    temp[3].setAttributeNS(null, "r", 0);
                    
                    temp[4].setAttributeNS(null, "x", 45);
                    temp[4].setAttributeNS(null, "y", 495);
                    temp[4].setAttributeNS(null, "height", 10);
                    temp[4].setAttributeNS(null, "width", 210);
                }
                else {
                    path1="50,700, 250,700";
                    temp[0].setAttributeNS(null, "r", 0);
                    temp[1].setAttributeNS(null, "r", 0);
                    
                    temp[6].setAttributeNS(null, "x", 45);
                    temp[6].setAttributeNS(null, "y", 695);
                    temp[6].setAttributeNS(null, "height", 10);
                    temp[6].setAttributeNS(null, "width", 210);
                }
            }
            
        }
        else{
            if (M1_1==0){
                temp[7].setAttributeNS(null, "x", 45);
                temp[7].setAttributeNS(null, "y", 495);
                temp[7].setAttributeNS(null, "height", 210);
                temp[7].setAttributeNS(null, "width", 10);
                if (M1_2==1){
                    path1="50,700, 50,500, 250,500";
                    temp[2].setAttributeNS(null, "r", 0);
                    
                    temp[4].setAttributeNS(null, "x", 45);
                    temp[4].setAttributeNS(null, "y", 495);
                    temp[4].setAttributeNS(null, "height", 10);
                    temp[4].setAttributeNS(null, "width", 210);
                }
                else{
                    path1="50,500, 50,700, 250,700";
                    temp[1].setAttributeNS(null, "r", 0);
                    
                    temp[6].setAttributeNS(null, "x", 45);
                    temp[6].setAttributeNS(null, "y", 695);
                    temp[6].setAttributeNS(null, "height", 10);
                    temp[6].setAttributeNS(null, "width", 210);
                }
            }
            else{
                if (M1_1==1){
                    if (M1_2==0){
                        path1="50,500, 250,500, 250,700";
                        temp[3].setAttributeNS(null, "r", 0);
                        
                        temp[5].setAttributeNS(null, "x", 245);
                        temp[5].setAttributeNS(null, "y", 495);
                        temp[5].setAttributeNS(null, "height", 210);
                        temp[5].setAttributeNS(null, "width", 10);
                        
                        temp[4].setAttributeNS(null, "x", 45);
                        temp[4].setAttributeNS(null, "y", 495);
                        temp[4].setAttributeNS(null, "height", 10);
                        temp[4].setAttributeNS(null, "width", 210);
                    }
                    else{
                        path1="50,500, "+point1_2.x+",500, "+point1_2.x+",700, 250,700";
                        temp[8].setAttributeNS(null, "x", point1_2.x-5);
                        temp[8].setAttributeNS(null, "y", 495);
                        temp[8].setAttributeNS(null, "height", 210);
                        temp[8].setAttributeNS(null, "width", 10);
                        
                        temp[4].setAttributeNS(null, "x", 45);
                        temp[4].setAttributeNS(null, "y", 495);
                        temp[4].setAttributeNS(null, "height", 10);
                        temp[4].setAttributeNS(null, "width", ~~(point1_2.x-50)+10);
                        
                        temp[6].setAttributeNS(null, "x", point1_2.x-5);
                        temp[6].setAttributeNS(null, "y", 695);
                        temp[6].setAttributeNS(null, "height", 10);
                        temp[6].setAttributeNS(null, "width", ~~(250-point1_2.x)+10);
                        
                        temp[1].setAttributeNS(null, "r", 0);
                        temp[3].setAttributeNS(null, "r", 0);
                    }
                }
                else{
                    if (M1_2==1){
                        path1="50,700, "+point1_2.x+",700, "+point1_2.x+",500, 250,500";
                        temp[6].setAttributeNS(null, "x", 45);
                        temp[6].setAttributeNS(null, "y", 695);
                        temp[6].setAttributeNS(null, "height", 10);
                        temp[6].setAttributeNS(null, "width", ~~(point1_2.x-50)+10);
                        
                        temp[8].setAttributeNS(null, "x", point1_2.x-5);
                        temp[8].setAttributeNS(null, "y", 495);
                        temp[8].setAttributeNS(null, "height", 210);
                        temp[8].setAttributeNS(null, "width", 10);
                        
                        temp[4].setAttributeNS(null, "x", point1_2.x-5);
                        temp[4].setAttributeNS(null, "y", 495);
                        temp[4].setAttributeNS(null, "height", 10);
                        temp[4].setAttributeNS(null, "width", ~~(250-point1_2.x)+10);
                        
                        temp[0].setAttributeNS(null, "r", 0);
                        temp[2].setAttributeNS(null, "r", 0);
                    }
                    else{
                        path1="50,700, 250,700, 250,500";
                        temp[0].setAttributeNS(null, "r", 0);
                        
                        temp[5].setAttributeNS(null, "x", 245);
                        temp[5].setAttributeNS(null, "y", 495);
                        temp[5].setAttributeNS(null, "height", 210);
                        temp[5].setAttributeNS(null, "width", 10);
                        
                        temp[6].setAttributeNS(null, "x", 45);
                        temp[6].setAttributeNS(null, "y", 695);
                        temp[6].setAttributeNS(null, "height", 10);
                        temp[6].setAttributeNS(null, "width", 210);
                    }
                }
            }
        }
        
        //setting player 2 path
        // We remove pure and mixed equilibria that don't correspond to player 2.
        if (M2_1==M2_2){
            if (M2_2==0){
                path2="50,500, 250,500, 250,700, 50,700, 50,500";
            }
            else{
                if (M2_2==1){
                    path2="50,500, 50,700";
                    temp[1].setAttributeNS(null, "r", 0);
                    temp[2].setAttributeNS(null, "r", 0);
                    temp[4].setAttributeNS(null, "height", 0);
                    temp[5].setAttributeNS(null, "height", 0);
                    temp[6].setAttributeNS(null, "height", 0);
                    temp[8].setAttributeNS(null, "height", 0);
                    temp[4].setAttributeNS(null, "width", 0);
                    temp[5].setAttributeNS(null, "width", 0);
                    temp[6].setAttributeNS(null, "width", 0);
                    temp[8].setAttributeNS(null, "width", 0);
                }
                else {
                    path2="250,500, 250,700";
                    temp[0].setAttributeNS(null, "r", 0);
                    temp[3].setAttributeNS(null, "r", 0);
                    temp[4].setAttributeNS(null, "height", 0);
                    temp[6].setAttributeNS(null, "height", 0);
                    temp[7].setAttributeNS(null, "height", 0);
                    temp[8].setAttributeNS(null, "height", 0);
                    temp[4].setAttributeNS(null, "width", 0);
                    temp[6].setAttributeNS(null, "width", 0);
                    temp[7].setAttributeNS(null, "width", 0);
                    temp[8].setAttributeNS(null, "width", 0);
                }
            }
            
        }
        else {
            if (M2_1==0){
                if (M2_2==1){
                    path2="50,700, 50,500, 250,500";
                    temp[2].setAttributeNS(null, "r", 0);
                    temp[5].setAttributeNS(null, "height", 0);
                    temp[6].setAttributeNS(null, "height", 0);
                    temp[8].setAttributeNS(null, "height", 0);
                    temp[5].setAttributeNS(null, "width", 0);
                    temp[6].setAttributeNS(null, "width", 0);
                    temp[8].setAttributeNS(null, "width", 0);
                }
                else{
                    path2="50,500, 250,500, 250,700";
                    temp[3].setAttributeNS(null, "r", 0);
                    temp[6].setAttributeNS(null, "height", 0);
                    temp[7].setAttributeNS(null, "height", 0);
                    temp[8].setAttributeNS(null, "height", 0);
                    temp[6].setAttributeNS(null, "width", 0);
                    temp[7].setAttributeNS(null, "width", 0);
                    temp[8].setAttributeNS(null, "width", 0);
                }
            }
            else{
                if (M2_1==1){
                    if (M2_2==0){
                        path2="50,500, 50,700, 250,700";
                        temp[1].setAttributeNS(null, "r", 0);
                        temp[4].setAttributeNS(null, "height", 0);
                        temp[5].setAttributeNS(null, "height", 0);
                        temp[8].setAttributeNS(null, "height", 0);
                        temp[4].setAttributeNS(null, "width", 0);
                        temp[5].setAttributeNS(null, "width", 0);
                        temp[8].setAttributeNS(null, "width", 0);
                    }
                    else{
                        path2="50,500, 50,"+Number(point2_2.x+Number(50))+", 250,"+Number(point2_2.x+Number(50))+", 250,700";
                        temp[1].setAttributeNS(null, "r", 0);
                        temp[3].setAttributeNS(null, "r", 0);
                        if (M1_2>0 && M1_1>0){
                            temp[4].setAttributeNS(null, "height", 0);
                            temp[5].setAttributeNS(null, "height", 0);
                            temp[6].setAttributeNS(null, "height", 0);
                            temp[7].setAttributeNS(null, "height", 0);
                            temp[8].setAttributeNS(null, "height", 10);
                            temp[4].setAttributeNS(null, "width", 0);
                            temp[5].setAttributeNS(null, "width", 0);
                            temp[6].setAttributeNS(null, "width", 0);
                            temp[7].setAttributeNS(null, "width", 0);
                            temp[8].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                        }
                        if (M1_1==0 && M1_2>0){
                            temp[4].setAttributeNS(null, "height", 0);
                            temp[5].setAttributeNS(null, "height", 0);
                            temp[6].setAttributeNS(null, "height", 0);
                            temp[7].setAttributeNS(null, "height", Number(point2_2.x-Number(500)+Number(50)));
                            temp[8].setAttributeNS(null, "height", 0);
                            temp[4].setAttributeNS(null, "width", 0);
                            temp[5].setAttributeNS(null, "width", 0);
                            temp[6].setAttributeNS(null, "width", 0);
                            temp[8].setAttributeNS(null, "y", 0);
                        }
                        if (M1_2==0 && M1_1>0){
                            temp[4].setAttributeNS(null, "height", 0);
                            temp[7].setAttributeNS(null, "height", 0);
                            temp[6].setAttributeNS(null, "height", 0);
                            temp[8].setAttributeNS(null, "height", 0);
                            temp[4].setAttributeNS(null, "width", 0);
                            temp[5].setAttributeNS(null, "height",Number(700-Number(point2_2.x)+Number(50)) );
                            temp[5].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                            temp[7].setAttributeNS(null, "width", 0);
                            temp[6].setAttributeNS(null, "width", 0);
                            temp[8].setAttributeNS(null, "y", 0);
                        }
                        if (M1_2==0 && M1_1==0){
                            
                            temp[7].setAttributeNS(null, "x", 45);
                            temp[7].setAttributeNS(null, "y", 495);
                            temp[7].setAttributeNS(null, "height", Number(point2_2.x-Number(500)+Number(50)));
                            temp[7].setAttributeNS(null, "width", 10);
                            
                            temp[8].setAttributeNS(null, "x", 45);
                            temp[8].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                            temp[8].setAttributeNS(null, "height", 10);
                            temp[8].setAttributeNS(null, "width", 210);
                            
                            temp[5].setAttributeNS(null, "x", 245);
                            temp[5].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                            temp[5].setAttributeNS(null, "height",Number(700-Number(point2_2.x)+Number(50)) );
                            temp[5].setAttributeNS(null, "width", 10);
                        }
                    }
                }
                else{
                    if (M2_2==1){
                        path2="50,700, 50,"+Number(point2_2.x+Number(50))+", 250,"+Number(point2_2.x+Number(50))+", 250,500";
                        temp[0].setAttributeNS(null, "r", 0);
                        temp[2].setAttributeNS(null, "r", 0);
                        if (M1_2>0 && M1_1>0){
                            temp[4].setAttributeNS(null, "height", 0);
                            temp[5].setAttributeNS(null, "height", 0);
                            temp[6].setAttributeNS(null, "height", 0);
                            temp[7].setAttributeNS(null, "height", 0);
                            temp[8].setAttributeNS(null, "height", 10);
                            temp[4].setAttributeNS(null, "width", 0);
                            temp[5].setAttributeNS(null, "width", 0);
                            temp[6].setAttributeNS(null, "width", 0);
                            temp[7].setAttributeNS(null, "width", 0);
                            temp[8].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                        }
                        if (M1_1==0 && M1_2>0){
                            temp[4].setAttributeNS(null, "height", 0);
                            temp[5].setAttributeNS(null, "height", 0);
                            temp[6].setAttributeNS(null, "height", 0);
                            temp[7].setAttributeNS(null, "height", Number(700-Number(point2_2.x)+Number(50)));
                            temp[7].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                            temp[8].setAttributeNS(null, "height", 0);
                            temp[4].setAttributeNS(null, "width", 0);
                            temp[5].setAttributeNS(null, "width", 0);
                            temp[6].setAttributeNS(null, "width", 0);
                            temp[8].setAttributeNS(null, "y", 0);
                        }
                        if (M1_2==0 && M1_1>0){
                            temp[4].setAttributeNS(null, "height", 0);
                            temp[7].setAttributeNS(null, "height", 0);
                            temp[6].setAttributeNS(null, "height", 0);
                            temp[8].setAttributeNS(null, "height", 0);
                            temp[4].setAttributeNS(null, "width", 0);
                            temp[5].setAttributeNS(null, "height", Number(point2_2.x-Number(500)+Number(50) ));
                            temp[7].setAttributeNS(null, "width", 0);
                            temp[6].setAttributeNS(null, "width", 0);
                            temp[8].setAttributeNS(null, "y", 0);
                        }
                        if (M1_2==0 && M1_1==0){
                            
                            temp[7].setAttributeNS(null, "x", 45);
                            temp[7].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                            temp[7].setAttributeNS(null, "height", Number(700-Number(point2_2.x)+Number(50)));
                            temp[7].setAttributeNS(null, "width", 10);
                            
                            temp[8].setAttributeNS(null, "x", 45);
                            temp[8].setAttributeNS(null, "y", Number(point2_2.x+Number(45)));
                            temp[8].setAttributeNS(null, "height", 10);
                            temp[8].setAttributeNS(null, "width", 210);
                            
                            temp[5].setAttributeNS(null, "x", 245);
                            temp[5].setAttributeNS(null, "y", 495);
                            temp[5].setAttributeNS(null, "height",Number(point2_2.x-Number(500)+Number(50) ));
                            temp[5].setAttributeNS(null, "width", 10);
                        }
                    }
                    else{
                        path2="50,700, 250,700, 250,500";
                        temp[0].setAttributeNS(null, "r", 0);
                        temp[4].setAttributeNS(null, "height", 0);
                        temp[7].setAttributeNS(null, "height", 0);
                        temp[8].setAttributeNS(null, "height", 0);
                        temp[4].setAttributeNS(null, "width", 0);
                        temp[7].setAttributeNS(null, "width", 0);
                        temp[8].setAttributeNS(null, "width", 0);
                    }
                }
            }
        }
        
        
        
        
        
        
        
        
        
        
       /* if (M2_1==1){
            path2="50,500";
            path2_2=", 50,";
            if (M1_1==1 || M1_1==0){
                temp[nb].setAttributeNS(null, "r", 10);
                temp[nb].setAttributeNS(null, "cx", 50);
                temp[nb].setAttributeNS(null, "cy", 500);
                nb++;
            }
            
        }
        else{
            if (M2_1==0 &&(M1_1==1 || M1_1==0)){
                temp[nb].setAttributeNS(null, "r", 10);
                temp[nb].setAttributeNS(null, "cx", 50);
                temp[nb].setAttributeNS(null, "cy", 500);
                nb++;
            }
            if (M1_2==1 || M1_2==0){
                temp[nb].setAttributeNS(null, "r", 10);
                temp[nb].setAttributeNS(null, "cx", 250);
                temp[nb].setAttributeNS(null, "cy", 500);
                nb++;
            }
            if (M2_1==2){
                path2="250,500";
                path2_2=", 250," ;
            }
            else{
                path2="50,500, 250,500";
                path2_2=", 250,";
            }
        }
        if (M2_2==1){
            path2_3=", 50,"
            path2_4=", 50,700";
            if (M1_1==2|| M1_1==0){
                temp[nb].setAttributeNS(null, "r", 10);
                temp[nb].setAttributeNS(null, "cx", 50);
                temp[nb].setAttributeNS(null, "cy", 700);
                nb++;
            }
            
        }
        else{
            
            if (M2_2==0&&(M1_1==2|| M1_1==0)){
                temp[nb].setAttributeNS(null, "r", 10);
                temp[nb].setAttributeNS(null, "cx", 50);
                temp[nb].setAttributeNS(null, "cy", 700);
                nb++;
            }
            path2_3=", 250,"
                if (M1_2==2 || M1_2==0){
                    temp[nb].setAttributeNS(null, "r", 10);
                    temp[nb].setAttributeNS(null, "cx", 250);
                    temp[nb].setAttributeNS(null, "cy", 700);
                    nb++;
                }
                
            if (M2_2==0){
                path2_4=", 250,700, 50,700";
            }
            else{
                path2_4=", 250,700";
            }
        }
        if (M1_1==1){
            path1="50,500, ";
            path1_2=",500, ";
        }
        else{
            if(M1_1==2){
            path1="50,700, ";
            path1_2=",700, ";
            }
            else{
                path1="50,500, 50,700, ";
                path1_2=",700, ";
            }
        }
        if (M1_2==1){
            path1_3=",500, ";
            path1_4="250,500";
        }
        else{
            if(M1_2==2){
                path1_3=",700, ";
                path1_4="250,700";}
            else{
                path1_3=",700, ";
            path1_4="250,700, 250,500";
            }
        }
        if (point1_2.x>50 && point1_2.x<250 && point2_2.x>450 && point2_2.x<650){
            var posx=~~(50+point1_2.x-50);
            temp[4].setAttributeNS(null, "x", posx-10);
            var posy=~~(500+point2_2.x-450);
            temp[4].setAttributeNS(null, "y", posy-10);
            temp[4].setAttributeNS(null, "height", 20);
            temp[4].setAttributeNS(null, "width", 20);
            path1=path1+posx+path1_2+posx+path1_3+path1_4;
            path2=path2+path2_2+posy+path2_3+posy+path2_4;
       }
        else{
            if (point2_2.x>450 && point2_2.x<650){
                posy=~~(500+point2_2.x-450);
                temp[4].setAttributeNS(null, "y", posy-10);
                temp[4].setAttributeNS(null, "height", 20);
                temp[4].setAttributeNS(null, "width", 20);
                path2=path2+path2_2+posy+path2_3+posy+path2_4;
                if(M1_1==0){
                    path1="50,500, 50,700, ";
                    rad=(700-posy);
                    temp[4].setAttributeNS(null, "y", 700-rad);
                    temp[4].setAttributeNS(null, "x", 40);
                    temp[4].setAttributeNS(null, "height", rad);
                    temp[4].setAttributeNS(null, "width", 20);
                    if(M2_1==1){
                        rad=(posy-500);
                        temp[4].setAttributeNS(null, "x", 40);
                        temp[4].setAttributeNS(null, "y", 500);
                        temp[4].setAttributeNS(null, "height", rad);
                        temp[4].setAttributeNS(null, "width", 20)
                    }
                }
                else if (M1_1==1)
                    path1="50,500, ";
                else
                    path1="50,700, ";
                if(M1_2==0){
                    if(M2_1==1){
                        rad=(700-posy);
                        temp[5].setAttributeNS(null, "x", 240);
                        temp[5].setAttributeNS(null, "y", 700-rad);
                        temp[5].setAttributeNS(null, "height", rad);
                        temp[5].setAttributeNS(null, "width", 20)
                    }
                    else{;
                        rad=(posy-500);
                        temp[5].setAttributeNS(null, "x", 240);
                        temp[5].setAttributeNS(null, "y", 500);
                        temp[5].setAttributeNS(null, "height", rad);
                        temp[5].setAttributeNS(null, "width", 20);
                    }
                    if (M1_1==1)
                        path1=path1+"250,500, 250,700";
                    else
                        path1=path1+"250,700, 250,500";
                }
                else {
                    
                    temp[5].setAttributeNS(null, "height", 0);
                    temp[5].setAttributeNS(null, "width", 0);
                    if (M1_2==1){
                        if(M1_1==1)
                            path1=path1+"250,500";
                        else
                        path1="250,500, "+path1;
                    }
                    else
                        path1=path1+"250,700";
                }
                if(M1_1==0 && M1_2==0)
                    path1=path1+", 50,500";
            }
            else{
                if(point1_2.x>50 && point1_2.x<250){
                    var posx=~~(50+point1_2.x-50);
                    temp[4].setAttributeNS(null, "x", posx-10);
                    temp[4].setAttributeNS(null, "height", 20);
                    temp[4].setAttributeNS(null, "width", 20);
                    path1=path1+posx+path1_2+posx+path1_3+path1_4;
                    if(M2_1==0){
                        path2="50,500, 250,500, ";
                        if(M1_1==1){
                            rad=(posx-50);
                            temp[4].setAttributeNS(null, "x", 50);
                            temp[4].setAttributeNS(null, "y", 490);
                            temp[4].setAttributeNS(null, "height", 20);
                            temp[4].setAttributeNS(null, "width", rad);
                        }
                        else{
                            rad=(250-posx);
                            temp[4].setAttributeNS(null, "x", 250-Number(rad));
                            temp[4].setAttributeNS(null, "y", 490);
                            temp[4].setAttributeNS(null, "height", 20);
                            temp[4].setAttributeNS(null, "width", rad);
                        }
                    }
                    else if (M2_1==1)
                    path2="50,500, ";
                    else
                    path2="250,500, ";
                    if (M2_2==0){
                        //path2=path2+"50,500, 250,500, ";
                        if(M1_1==1){
                            rad=(250-posx);
                            temp[5].setAttributeNS(null, "x", 250-Number(rad));
                            temp[5].setAttributeNS(null, "y", 690);
                            temp[5].setAttributeNS(null, "height", 20);
                            temp[5].setAttributeNS(null, "width", rad);
                        }
                        else{
                            rad=(posx-50);
                            temp[5].setAttributeNS(null, "x", 50);
                            temp[5].setAttributeNS(null, "y", 690);
                            temp[5].setAttributeNS(null, "height", 20);
                            temp[5].setAttributeNS(null, "width", rad);
                        }
                        if(M2_1==1)
                        path2=path2+"50,700, 250,700";
                        else
                        path2=path2+"250,700, 50,700";
                    }
                    else{
                        temp[5].setAttributeNS(null, "height", 0);
                        temp[5].setAttributeNS(null, "width", 0);
                           if (M2_2==1){
                        if(M2_1==1)
                        path2=path2+"50,700";
                        else
                        path2="50,700, "+path2;
                        }
                        else
                        path2=path2+"250,700";
                    }
                    if(M2_1==0 && M2_2==0)
                    path2=path2+", 50,500";
                }
                else{
                    temp[4].setAttributeNS(null, "height", 0);
                    temp[4].setAttributeNS(null, "width", 0);
                    temp[5].setAttributeNS(null, "height", 0);
                    temp[5].setAttributeNS(null, "width", 0);
                    if(M1_1==0 &&M1_2==1)
                        path1=path1_4+","+path1;
                    else{
                        if(M1_2==0 &&M1_1==1)
                            path1=path1_4+","+path1;
                        else
                            path1=path1+path1_4;
                    }
                    if(M1_1==0 && M1_2==0)
                        path1=path1+", 50,500";
                    if(M2_1==0 && M2_2==1)
                        path2="50,700"+path2_4+","+path2;
                    else{
                        if(M2_2==0 && M2_1==1)
                            path2="50,700"+path2_4+","+path2;
                        else
                            path2=path2+path2_4;
                        }
                    if(M2_1==0 && M2_2==0)
                        path2=path2+", 50,500";
                }
            }
       }*/
        temp2[0].setAttributeNS(null, "points", path1);
        temp2[1].setAttributeNS(null, "points", path2);
        
        var stick=svg.getElementsByClassName("middle21");
        for (i=0;i<stick.length;i++){
            if(point2_2.x==650){
                stick[i].textContent=""
            }
            if(M2_2==2)
            pos=(point2_2.x+Number(450))/2;
            else
            pos=(point2_2.x+Number(650))/2;
            
            stick[i].setAttributeNS(null, "x",pos);
        }
        var stick=svg.getElementsByClassName("middle22");
        for (i=0;i<stick.length;i++){
            if(point2_2.x==450){
                stick[i].textContent=""
            }
            if(M2_1==2)
            pos=(point2_2.x+Number(450))/2;
            else
            pos=(point2_2.x+Number(650))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
        
        var stick=svg.getElementsByClassName("middle11");
        for (i=0;i<stick.length;i++){
            if(point1_2.x==250){
                stick[i].textContent=""
            }
            if(M1_2==2)
            pos=(point1_2.x+Number(50))/2;
            else
            pos=(point1_2.x+Number(250))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
        var stick=svg.getElementsByClassName("middle12");
        for (i=0;i<stick.length;i++){
            if(point1_2.x==50){
                stick[i].textContent=""
            }
            if(M1_1==2)
            pos=(point1_2.x+Number(50))/2;
            else
            pos=(point1_2.x+Number(250))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
    }






</script>
 <!-- Table for user to update payoff and strategies' names.-->
 <div id="toolbar" class="full-width darker">
     <div>
         <img src="images/horiz8_small.png" class="left ml-10 vertical-centered">
    </div>
     <div>
         <ul class="vertical-centered">
             <li><button id="button-new" class="button button--sacnite button--inverted" alt="New game" title="New game"><i class="icon-file"></i></button></li>
         </ul>
         <ul class="vertical-centered">
             <li><button id="button-tree" class="text-button" alt="Strategic Form" title="Strategic Form">Tree</button></li>
             <li><button id="button-strategic" class="text-button" alt="Strategic Form" title="Strategic Form">Convert to Strategic</button></li>
         </ul>
     </div>
     <div>
         <ul class="vertical-centered">
             <li><button id="button-independent-strategic-general" class="text-button" alt="Create Independent Stratgic Form" title="Create Independent Stratgic Form"><span>General</span></button></li>
             <li><button id="button-independent-strategic-zerosum" class="text-button" alt="Create Independent Stratgic Form" title="Create Independent Stratgic Form">Zero Sum</button></li>
             <li><button id="button-independent-strategic-symmetric" class="text-button" alt="Create Independent Stratgic Form" title="Create Independent Stratgic Form">Symmetric</button></li>
         </ul>
     </div>
     <div>
         <ul class="vertical-centered">
             <li><button id="button-add" class="active button button--sacnite button--inverted" alt="Add child node" title="Add child node"><i class="icon-plus-circle"></i></button></li>
             <li><button id="button-remove" class="button button--sacnite button--inverted" alt="Remove node" title="Remove node"><i class="icon-minus-circle"></i></button></li>
         </ul>
         <ul class="vertical-centered">
             <div id="player-buttons">
             </div>
             <li><button id="button-player-more" class="button button--sacnite button--inverted" alt="More players" title="More players"><i class="icon-user-plus"></i></button></li>
             <li><button id="button-player-less" class="button button--sacnite button--inverted" alt="Less players" title="Less players"><i class="icon-user-less"></i></button></li>
         </ul>
         <ul class="vertical-centered">
             <li><button id="button-merge" class="button button--sacnite button--inverted" alt="Merge isets"><i class="icon-link"></i></button></li>
             <li><button id="button-dissolve" class="button button--sacnite button--inverted" alt="Dissolve iset"><i class="icon-unlink"></i></button></li>
         </ul>
         <ul class="vertical-centered">
             <li><button id="button-matrix" class="text-button" alt="Settings">Edit Matrix</button></li>
         </ul>
         <ul class="vertical-centered">
             <li><button id="button-solve-lrs" class="text-button" alt="solve lrs">Solve Lrs</button></li>
         </ul>
     </div>
  </div>
 </div>
 <div id="canvas">
     <label>Precision : </label>
     <input class="precision" type="text" id="precision" onchange="redraw()" value="1"/>
     
 </div>
 <div id="matrixPopup">
     <div id="matrix_bar">
         Matrix
     </div>
     <a id="button-matrix-close" title="Close" class="close">X</a>
     <form id="matrix-settings" action="" method="post">
         <textarea id="matrix-player-1" rows = "15" cols = "30"></textarea>
         <textarea id="matrix-player-2" rows = "15" cols = "30"></textarea><br>
     </form>
     <button id="button-matrix-save" type="submit" name="save">Save</button>
     <button id="button-matrix-reset" name="reset">Reset</button>
 </div>

        
        <svg id="drawing" version="1.1" currentScale="1" height="750" width="700"> <!-- viewBox="0 0 700 750" -->
            <marker id="triangle_left"
                viewBox="0 0 10 10" refX="0" refY="0"
                markerUnits="strokeWidth"
                markerWidth="10" markerHeight="10"
                orient="auto">
                <path d="M 0 0 L 10 5 L 10 -5 z" />
            </marker>
            <marker id="triangle_down"
                viewBox="0 0 10 10" refX="0" refY="5"
                markerUnits="strokeWidth"
                markerWidth="10" markerHeight="10"
                orient="auto">
                <path d="M 0 0 L 10 5 L 0 10 z" />
            </marker>

            <!-- Drawing the contour-->
            <polyline class="contour" points="50,50 50,350 250,350, 250,50"/>
            <!-- Legend, strategy names will be updated after-->
            <text class="player1 title" x="150" y="40">I's payoff</text>
            <text class="player2 legendh" x="140" y="390">II's probability of</text><text class="player2 strat_left strat22" x="205" y="390">S2 </text>
            <!--
            <text class="player2 legendv" id="y11" x="20" y="200" transform="rotate(270 20,200)">S1</text>
            <text class="player2 legendv" id="y12" x="280" y="200" transform="rotate(90 280,200)">S2</text>
             -->
            <text class="player2 legendh" x="50" y="370">0</text>
            <text class="player2 legendh" x="250" y="370">1</text>
            <!-- Upper envelop, coordinates will be updated-->
            <polygon id="envelop1" points="50,50 50,350 250,350 250,50"/>
            <!-- First strategy payoff-->
            <line class="line1 lined1"  id="11" x1="50" y1="350" x2="250" y2="350"/>
            <line class="line_trans lined1" asso_player="0" asso_strat="0" asso1="P1_11"  asso2="P1_12" asso_player1="0" asso_strat1="0" asso_player2="0" asso_strat2="1" x1="50" y1="350" x2="250" y2="350"/>
            <text id="text11" class="player1 strat" x="80" y="350">S1</text>
            <!-- Second strategy payoff-->
            <line class="line1 lined1" id="12" x1="50" y1="350" x2="250" y2="350"/>
            <line class="line_trans lined1" asso_player="0" asso_strat="1" asso1="P1_21"  asso2="P1_22" asso_player1="0" asso_strat1="2" asso_player2="0" asso_strat2="3" x1="50" y1="350" x2="250" y2="350"/>
            <text id="text12" class="player1 strat" x="220" y="350">S2</text>
            <!-- Sticks-->
            <line class="stick" x1="50" y1="80" x2="45" y2="80"/>
            <text class="sticklabel" x="40" y="85">9</text>
            <line class="stick" x1="50" y1="110" x2="45" y2="110"/>
            <text class="sticklabel" x="40" y="115">8</text>
            <line class="stick" x1="50" y1="140" x2="45" y2="140"/>
            <text class="sticklabel" x="40" y="145">7</text>
            <line class="stick" x1="50" y1="170" x2="45" y2="170"/>
            <text class="sticklabel" x="40" y="175">6</text>
            <line class="stick" x1="50" y1="200" x2="45" y2="200"/>
            <text class="sticklabel" x="40" y="205">5</text>
            <line class="stick" x1="50" y1="230" x2="45" y2="230"/>
            <text class="sticklabel" x="40" y="235">4</text>
            <line class="stick" x1="50" y1="260" x2="45" y2="260"/>
            <text class="sticklabel" x="40" y="265">3</text>
            <line class="stick" x1="50" y1="290" x2="45" y2="290"/>
            <text class="sticklabel" x="40" y="295">2</text>
            <line class="stick" x1="50" y1="320" x2="45" y2="320"/>
            <text class="sticklabel" x="40" y="325">1</text>
            <line class="stick" x1="250" y1="80" x2="255" y2="80"/>
            <text class="sticklabel" x="260" y="85">9</text>
            <line class="stick" x1="250" y1="110" x2="255" y2="110"/>
            <text class="sticklabel" x="260" y="115">8</text>
            <line class="stick" x1="250" y1="140" x2="255" y2="140"/>
            <text class="sticklabel" x="260" y="145">7</text>
            <line class="stick" x1="250" y1="170" x2="255" y2="170"/>
            <text class="sticklabel" x="260" y="175">6</text>
            <line class="stick" x1="250" y1="200" x2="255" y2="200"/>
            <text class="sticklabel" x="260" y="205">5</text>
            <line class="stick" x1="250" y1="230" x2="255" y2="230"/>
            <text class="sticklabel" x="260" y="235">4</text>
            <line class="stick" x1="250" y1="260" x2="255" y2="260"/>
            <text class="sticklabel" x="260" y="265">3</text>
            <line class="stick" x1="250" y1="290" x2="255" y2="290"/>
            <text class="sticklabel" x="260" y="295">2</text>
            <line class="stick" x1="250" y1="320" x2="255" y2="320"/>
            <text class="sticklabel" x="260" y="325">1</text>
            <!-- Intersection point-->
            <circle class="inter" id="inter1" cx="250" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <line class="line2 interstick1" x1="250" y1="350" x2="250" y2="355"/>
            <text class="player2 legendh" id="interlabel1" x="250" y="370">1</text>
            <!-- Payoff points-->
            <circle class="pay line1" id="Payoff1_11" asso="P1_11" asso_player="0" asso_strat="0" cx="50" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line1" id="Payoff1_12" asso="P1_12" asso_player="0" asso_strat="1" cx="250" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line1" id="Payoff1_21" asso="P1_21" asso_player="0" asso_strat="2" cx="50" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line1" id="Payoff1_22" asso="P1_22" asso_player="0" asso_strat="3" cx="250" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>

            <!-- Drawing the contour-->
            <polyline class="contour" points="450,50 450,350 650,350, 650,50" draggable="false"/>
            <!-- Legend, strategy names will be updated after-->
            <text class="player2 title" x="550" y="40">II's payoff</text>
            <text class="player1 legendh" x="540" y="390">I's probability of </text><text class="player1 strat_left strat12" x="605" y="390">S2 </text>
            <text class="player1 legendh" x="450" y="370">0</text>
            <text class="player1 legendh" x="650" y="370">1</text>
            <!--
            <text class="player1 legendv" id="y21" x="420" y="200"transform="rotate(270 420,200)">S1</text>
            <text class="player1 legendv" id="y22" x="680" y="200"transform="rotate(90 680,200)">S2</text>
             -->
            <!-- Upper envelop, coordinates will be updated-->
            <polygon id="envelop2" points="450,50 450,350 450,350 450,50"/>
            <!-- First strategy payoff-->
            <line class="line2 lined2" id="21" x1="450" y1="350" x2="650" y2="350"/>
            <line class="line_trans lined2"  asso_player="1" asso_strat="0" asso1="P2_11"  asso2="P2_21" asso_player1="1" asso_strat1="0" asso_player2="1" asso_strat2="2"  x1="450" y1="350" x2="650" y2="350"/>
            <text id="text21" class="player2 legendv" x="480" y="350">S1</text>
            <!-- Second strategy payoff-->
            <line class="line2 lined2"  id="22" x1="450" y1="350" x2="650" y2="350"/>
            <line class="line_trans lined2" asso_player="1" asso_strat="1" asso1="P2_12"  asso2="P2_22" asso_player1="1" asso_strat1="1" asso_player2="1" asso_strat2="3" x1="450" y1="350" x2="650" y2="350"/>
            <text id="text22" class="player2 legendv" x="620" y="350">S2</text>
            <!-- Sticks-->
            <line class="stick" x1="450" y1="80" x2="445" y2="80"/>
            <text class="sticklabel" x="440" y="85">9</text>
            <line class="stick" x1="450" y1="110" x2="445" y2="110"/>
            <text class="sticklabel" x="440" y="115">8</text>
            <line class="stick" x1="450" y1="140" x2="445" y2="140"/>
            <text class="sticklabel" x="440" y="145">7</text>
            <line class="stick" x1="450" y1="170" x2="445" y2="170"/>
            <text class="sticklabel" x="440" y="175">6</text>
            <line class="stick" x1="450" y1="200" x2="445" y2="200"/>
            <text class="sticklabel" x="440" y="205">5</text>
            <line class="stick" x1="450" y1="230" x2="445" y2="230"/>
            <text class="sticklabel" x="440" y="235">4</text>
            <line class="stick" x1="450" y1="260" x2="445" y2="260"/>
            <text class="sticklabel" x="440" y="265">3</text>
            <line class="stick" x1="450" y1="290" x2="445" y2="290"/>
            <text class="sticklabel" x="440" y="295">2</text>
            <line class="stick" x1="450" y1="320" x2="445" y2="320"/>
            <text class="sticklabel" x="440" y="325">1</text>
            <line class="stick" x1="650" y1="80" x2="655" y2="80"/>
            <text class="sticklabel" x="660" y="85">9</text>
            <line class="stick" x1="650" y1="110" x2="655" y2="110"/>
            <text class="sticklabel" x="660" y="115">8</text>
            <line class="stick" x1="650" y1="140" x2="655" y2="140"/>
            <text class="sticklabel" x="660" y="145">7</text>
            <line class="stick" x1="650" y1="170" x2="655" y2="170"/>
            <text class="sticklabel" x="660" y="175">6</text>
            <line class="stick" x1="650" y1="200" x2="655" y2="200"/>
            <text class="sticklabel" x="660" y="205">5</text>
            <line class="stick" x1="650" y1="230" x2="655" y2="230"/>
            <text class="sticklabel" x="660" y="235">4</text>
            <line class="stick" x1="650" y1="260" x2="655" y2="260"/>
            <text class="sticklabel" x="660" y="265">3</text>
            <line class="stick" x1="650" y1="290" x2="655" y2="290"/>
            <text class="sticklabel" x="660" y="295">2</text>
            <line class="stick" x1="650" y1="320" x2="655" y2="320"/>
            <text class="sticklabel" x="660" y="325">1</text>
            <!-- Intersection point-->
            <circle class="inter" id="inter2" cx="650" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <line class="line1 interstick2" x1="650" y1="350" x2="650" y2="355"/>
            <text class="player1 legendh" id="interlabel2" x="650" y="370">1</text>
            <!-- Payoff points-->
            <circle class="pay line2" id="Payoff2_11" asso="P2_11" asso_player="1" asso_strat="0" cx="450" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line2" id="Payoff2_12" asso="P2_12" asso_player="1" asso_strat="1" cx="450" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line2" id="Payoff2_21" asso="P2_21" asso_player="1" asso_strat="2" cx="650" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line2" id="Payoff2_22" asso="P2_22" asso_player="1" asso_strat="3" cx="650" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            
            
            <!-- Drawing the contour-->
            <polyline class="contour" points="50,500 50,700 250,700, 250,500, 50,500"/>
            <!-- Best player1 --->
            <polyline  class="brline line1" points="50,500 50,700 250,700, 250,500"/>
            <!-- Best player2 --->
            <polyline class="brline line2" points="50,500 50,700 250,700, 250,500"/>
            <!--pure equilibrium--->
            <circle class="br" cx="50" cy="500" r="10"  draggable="false" />
            <circle class="br" cx="250" cy="500" r="10" draggable="false"/>
            <circle class="br" cx="250" cy="700" r="10"  draggable="false" />
            <circle class="br" cx="50" cy="700" r="10" draggable="false"/>
            <!--mixed equilibrium--->
            <rect class="br" x="40" y="490" width="20" height="20" fill="green"/>
            <rect class="br" x="40" y="490" width="20" height="20" fill="green"/>
            <rect class="br" x="40" y="490" width="20" height="20" fill="green"/>
            <rect class="br" x="40" y="490" width="20" height="20" fill="green"/>
            <rect class="br" x="40" y="490" width="20" height="20" fill="green"/>
            
            <!--legend -->
            <line class="line2" x1="50" y1="450" x2="250" y2="450"/>
            <line class="stick" x1="50" y1="445" x2="50" y2="455"/>
            <line class="stick" x1="250" y1="445" x2="250" y2="455"/>
            <line class="line2 interstick1" x1="50" y1="445" x2="50" y2="455"/>
            <text class="player2 strat_right strat22" x="25" y="455">S2 </text><text class="player2" x="35" y="455">=0</text>
            <text class="player2 strat_left strat21" x="255" y="455">S1 </text><text class="player2" x="270" y="455">=0</text>
            <text class="player1 strat_right strat11" x="35" y="505">S2 </text>
            <text class="player1 strat_right strat12" x="35" y="705">S1 </text>
            <text class="player2 strat strat21" x="50" y="720">S2 </text>
            <text class="player2 strat strat22" x="250" y="720">S1 </text>
            
            <text class="player2 strat strat21 middle21" x="35" y="430">S2 </text>
            <text class="player2 strat strat22 middle22" x="265" y="430">S1 </text>
            <text class="player1 strat strat11 middle11" x="435" y="430">S2 </text>
            <text class="player1 strat strat12 middle12" x="665" y="430">S1 </text>
            
            <line class="line1" x1="450" y1="450" x2="650" y2="450"/>
            <line class="stick" x1="450" y1="445" x2="450" y2="455"/>
            <line class="stick" x1="650" y1="445" x2="650" y2="455"/>
            <line class="line1 interstick2" x1="450" y1="445" x2="650" y2="455"/>
            <text class="player1 strat_right strat12" x="425" y="455">S2 </text><text class="player1" x="435" y="455">=0</text>
            <text class="player1 strat_left strat11" x="655" y="455">S1 </text><text class="player1" x="675" y="455">=0</text>
            
            <line class="stick" x1="50" y1="460" x2="50" y2="480" marker-end="url(#triangle_down)"/>
            <line class="stick" x1="250" y1="460" x2="250" y2="480" marker-end="url(#triangle_down)"/>
            <path class="arc" d="M450,460 A40,40 0 0,1 410,500"/>
            <path class="arc" d="M650,460 A240,240 0 0,1 410,700"/>
            <line class="stick" x1="410" y1="500" x2="280" y2="500" marker-end="url(#triangle_down)"/>
            <line class="stick" x1="410" y1="700" x2="280" y2="700" marker-end="url(#triangle_down)"/>
            
        </svg>

        
        <script src="js/thirdparty/svg.min.js"></script>
        <script src="js/thirdparty/jquery.min.js"></script>
        <script src="js/structure.js"></script>
        <script src="js/guiutils/Tools.js"></script>
        <script src="js/guiutils/ContentEditable.js"></script>
        <script src="js/guiutils/MultiAction.js"></script>
        <script src="js/guiutils/Block.js"></script>
        <script src="js/tree/Utils.js"></script>
        <script src="js/tree/ISet.js"></script>
        <script src="js/tree/Move.js"></script>
        <script src="js/tree/ChanceMove.js"></script>
        <script src="js/tree/Payoff.js"></script>
        <script src="js/tree/Player.js"></script>
        <script src="js/tree/Tree.js"></script>
        <script src="js/tree/Node.js"></script>
        <script src="js/strategic/StrategyBlock.js"></script>
        <script src="js/strategic/Strategy.js"></script>
        <script src="js/strategic/Matrix.js"></script>
        <script src="js/strategic/StrategicUnit.js"></script>
        <script src="js/eqdiagrams.js"></script>
        <script src="js/servercomm/Communication.js"></script>
                                                                    
</body>
</html>
